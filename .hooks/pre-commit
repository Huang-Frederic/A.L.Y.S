#!/bin/bash

# Stage 1: Formatting (Black and isort)
echo "Running formatting checks..."
echo "Running black ..."
git diff --cached --name-only --diff-filter=ACMRTUXB | grep '\.py$' | xargs -r black
echo "Running isort ..."
git diff --cached --name-only --diff-filter=ACMRTUXB | grep '\.py$' | xargs -r isort

# Stage 2: Type Checking (mypy)
echo "Running type checking..."
echo "Running mypy ..."
git diff --cached --name-only --diff-filter=ACMRTUXB | grep '\.py$' | xargs -r mypy

# Add changes back to staging 
git add -u

exit 0
